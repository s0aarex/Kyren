<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Kyren</title>
  <link rel="stylesheet" href="./assets/style.css">
  <link rel="icon" href="./favicon.svg" type="image/svg+xml">
</head>
<body>
  <div class="bg-layer">
    <div class="bg-glow"></div>
    <div class="bg-grid"></div>
    <div class="bg-grain"></div>
    <div class="bg-scribbles" id="bgScribbles"></div>
  </div>

  <div class="wrap">
    <div class="top">
      <div class="brand"><span class="dot"></span><span>KYREN</span><span style="opacity:.55">â€”</span><span id="tag">SOURCE HUB</span></div>
      <div class="actions">
        <a class="pill" href="https://github.com/s0aarex/Kyren" target="_blank" rel="noreferrer">ğŸ™ GitHub</a>
        <a class="pill" href="./feedback.html" id="top_feedback">ğŸ’¬ Feedback</a>
        <div class="lang" id="langToggle">ğŸŒ <span id="langLabel">PT-BR</span> <small>â†”</small> EN</div>
      </div>
    </div>

    <h1 class="reveal" id="title">Kyren <span class="ital">official</span></h1>
    <p class="sub reveal" id="sub">
      Site oficial da source Kyren â€” guia rÃ¡pido, patch notes e uma Ã¡rea pra pedidos/sugestÃµes/bugs (tudo rastreÃ¡vel no GitHub).
    </p>

    <div class="ctaRow reveal">
      <a class="btn" href="./how-to-use.html" id="cta1">ğŸš€ Como usar</a>
      <a class="btn ghost" href="./patch-notes.html" id="cta2">ğŸ§¾ Patch notes</a>
      <a class="btn ghost" href="./feedback.html" id="cta3">ğŸ’¬ Feedback</a>
    </div>

    <div class="section reveal">
      <div class="label" id="label1">O QUE TEM AQUI</div>
      <div class="grid">
        <div class="card">
          <h3>âš¡ Quick setup</h3>
          <p id="c1">Passo a passo curto e direto pra importar a source no Hydra.</p>
        </div>
        <div class="card">
          <h3>ğŸ§ª Updates</h3>
          <p id="c2">MudanÃ§as organizadas: o que entrou, o que mudou e o que foi corrigido.</p>
        </div>
        <div class="card">
          <h3>ğŸ§· Tickets</h3>
          <p id="c3">Pedidos, sugestÃµes e bugs viram tickets â€” dÃ¡ pra acompanhar e comentar.</p>
        </div>
      </div>
    </div>

    <div class="section reveal">
  <div class="label" id="latest_label">LATEST PATCH</div>

  <div class="grid">
    <div class="card" id="latestPatchCard">
      <h3>â³ Carregandoâ€¦</h3>
      <p style="opacity:.75">Se nÃ£o carregar, Ã© cache ou caminho do JSON.</p>
    </div>
  </div>

  <div class="ctaRow" style="margin-top:18px;">
    <a class="btn ghost" href="./patch-notes.html" id="latest_btn">ğŸ§¾ Ver patch notes</a>
  </div>
</div>

    <div class="section reveal">
      <div class="label" id="label2">ATALHOS</div>
      <div class="ctaRow">
        <a class="btn ghost" href="https://github.com/s0aarex/Kyren/issues/new/choose" target="_blank" rel="noreferrer" id="forms">ğŸ“Œ Abrir formulÃ¡rios</a>
      </div>
    </div>
  </div>

  <script src="./assets/app.js"></script>
  <script>
    kyrenMountScribbles();
    kyrenReveal();
    
async function kyrenLoadLatestPatch(){
  try{
    const res = await fetch("./patch-notes.json", { cache: "no-store" });
    const patches = await res.json();
    const latest = patches?.[0];
    const card = document.getElementById("latestPatchCard");
    if(!latest || !card) return;

    // idioma atual (pt/en)
    const lang = (localStorage.getItem("kyren_lang") || "pt-BR").startsWith("en")
      ? "en"
      : "pt";

    // resolve objeto vs string
    const title = (typeof latest.title === "object") ? (latest.title[lang] || "") : (latest.title || "");
    const summary = (typeof latest.summary === "object") ? (latest.summary[lang] || "") : (latest.summary || "");
    const highlights = (typeof latest.highlights === "object")
      ? (latest.highlights[lang] || [])
      : (latest.highlights || []);

    card.innerHTML = `
      <h3>ğŸš€ ${latest.version} â€¢ ${title}</h3>

      <p style="margin-top:10px; opacity:.75">
        ğŸ—“ï¸ ${latest.date}<br>
        ${summary}
      </p>

      ${
        highlights.length
          ? `<div style="margin-top:14px; display:flex; flex-direction:column; gap:8px;">
              ${highlights.slice(0,3).map(h => `
                <div style="
                  padding:10px 12px;
                  border:1px solid rgba(255,255,255,.08);
                  border-radius:14px;
                  background:rgba(255,255,255,.03);
                ">${h}</div>
              `).join("")}
            </div>`
          : ""
      }

      ${latest.stats ? `
        <p style="margin-top:12px;opacity:.85">
          ğŸ“Œ +${latest.stats.added ?? 0}
          â€¢ âœï¸ ${latest.stats.updated ?? 0}
          â€¢ ğŸ§¼ ${latest.stats.cleaned ?? 0}
        </p>
      ` : ""}
    `;
  } catch(e){
    console.error(e);
    const card = document.getElementById("latestPatchCard");
    if(card) card.innerHTML =
      `<h3>âš ï¸ NÃ£o carregou</h3><p style="opacity:.75">Checa se <b>./patch-notes.json</b> existe em <b>/docs</b>.</p>`;
  }
}
kyrenLoadLatestPatch();
</script>

    function setUI(lang){
      localStorage.setItem("kyren_lang", lang);
      document.documentElement.lang = (lang==="en") ? "en" : "pt-BR";
      const d = copy[lang];

      document.getElementById("langLabel").textContent = d.langLabel;
      document.getElementById("tag").textContent = d.tag;
      document.getElementById("top_feedback").textContent = d.top_feedback;

      document.getElementById("title").innerHTML = d.title;
      document.getElementById("sub").textContent = d.sub;

      document.getElementById("cta1").textContent = d.cta1;
      document.getElementById("cta2").textContent = d.cta2;
      document.getElementById("cta3").textContent = d.cta3;

      document.getElementById("label1").textContent = d.label1;
      document.getElementById("c1").textContent = d.c1;
      document.getElementById("c2").textContent = d.c2;
      document.getElementById("c3").textContent = d.c3;

      document.getElementById("label2").textContent = d.label2;
      document.getElementById("forms").textContent = d.forms;

      document.getElementById("latest_label").textContent = d.latest_label;
      document.getElementById("latest_btn").textContent = d.latest_btn;
    }

    kyrenInitLang(setUI);
  <script src="./assets/app.js"></script>
  </script>
</body>
</html>
